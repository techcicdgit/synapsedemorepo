{
	"name": "CONFIGURATION TABLE IMBALANCE PRICING",
	"properties": {
		"content": {
			"query": "-- CREATE SCHEMA\nCREATE SCHEMA CONFIGURATION\n\n-- DROP TABLES\nDROP TABLE[CONFIGURATION].[DATASOURCES]\n\n--DATABASE\n\nUSE DATABASE ddsqlpool_synapse\n\n-- DATA SOURCES\n\nCREATE TABLE [CONFIGURATION].[DATASOURCES]\n(\n    [PipelineType] [varchar] (255) NULL,\n    [ConnectorType] [varchar] (255) NULL,\n    [FetchFrequency] [varchar] (255) NULL,\n    [DataSource] [varchar] (255) NULL,\n    [SourcePath] [varchar] (255) NULL,\n    [SourceName] [varchar] (255) NULL,\n    [SourceExtension] [varchar] (255) NULL,\n    [Separator] [varchar] (255) NULL,\n    [FileEncoding] [varchar] (255) NULL\n)\nWITH\n\n(\nDISTRIBUTION = REPLICATE,\nCLUSTERED COLUMNSTORE INDEX\n)\nGO\n\nINSERT INTO [CONFIGURATION].[DATASOURCES] (PipelineType,ConnectorType,FetchFrequency,DataSource,SourcePath,SourceName,SourceExtension,Separator,FileEncoding)\nVALUES ('API', 'REST-ANONYMOUS-GET', 'daily', 'BMRS', 'https://api.bmreports.com/BMRS/PHYBMDATA/v1?APIKey=idiab5bwsvvo5a7&SettlementDate=2022-12-04&SettlementPeriod=24&ServiceType=csv', 'DS7Generations', 'csv', ',', 'UTF-8')\nGO\n\nSELECT * FROM [CONFIGURATION].[DATASOURCES]\n\n-- DATA MAPPING\n\nCREATE TABLE [CONFIGURATION].[DATAMAPPING]\n(\n [DataSource] [varchar] (255) NULL,\n [Sourcecolumn] [varchar] (255) NULL,\n [SourceColumnType] [varchar] (255) NULL,\n [TargetTable] [varchar] (255) NULL,\n [TargetColumn] [varchar] (255) NULL,\n [TargetColumnType] [varchar] (255) NULL,\n [ValidationRules] [varchar] (255) NULL,\n [StandarddizationRules] [varchar] (1000) NULL,\n [IsPK] [bit] NULL\n)\nWITH\n(\n    DISTRIBUTION = REPLICATE,\n    CLUSTERED COLUMNSTORE INDEX\n)\nGO\n\n-- Assets\n\nINSERT INTO [CONFIGURATION].[DATAMAPPING] (DataSource,Sourcecolumn,SourceColumnType,TargetTable,TargetColumn,TargetColumnType,ValidationRules,StandarddizationRules,IsPK)\nVALUES ('BMRS.DS7Generations', 'DS7Gen', 'str', 'DS7GenCurated','DS7Gen', 'str', 'isComplete', '', 0)\n\nSELECT * FROM [CONFIGURATION].[DATAMAPPING] WHERE DataSource = 'BMRS.DS7Generations'\n\n\n-- DATA SOURCES FOR YAHOO FINANCE API\n\n\n-- DATA SOURCE\n\n-- INSERT INTO [CONFIGURATION].[DataSources] (PipelineType, ConnectorType, FetchFrequency, DataSource, SourcePath, SourceName, SourceExtension, Separator, FileEncoding, PartitioningColumn, IsTimeSeries, Priority)\n-- VALUES ('API', 'REST-ANONYMOUS-GET', 'daily', 'YahooFinance', 'https://query1.finance.yahoo.com/v7/finance/download/GBPEUR=X?period1=1640995200&period2=1670371200&interval=1d&events=history&includeAdjustedClose=true', 'GBP_EURO', 'csv', ',', 'UTF-8','', 0, 1) \n\n-- DATA MAPPING\n\n-- GBP_EURO\n\n--delete from [CONFIGURATION].[DataMapping] where DataSource = 'YahooFinance.GBP_Euro'\n\n--INSERT INTO [CONFIGURATION].[DataMapping] (DataSource, SourceColumn, SourceColumnType, TargetTable, TargetColumn, TargetColumnType, ValidationRules, StandardizationRules, IsPK)\n--VALUES ('YahooFinace.GBP_EURO', 'Date', 'timestamp', 'GBP_EURO_Curated', 'Date', 'timestamp', 'isComplete', 'conformToDate', 1) \n\n--INSERT INTO [CONFIGURATION].[DataMapping] (DataSource, SourceColumn, SourceColumnType, TargetTable, TargetColumn, TargetColumnType, ValidationRules, StandardizationRules, IsPK)\n--VALUES ('YahooFinace.GBP_EURO', 'Open', 'float', 'GBP_EURO_Curated', 'GBP_EURO', 'float', 'isComplete', '', 0) \n\n--INSERT INTO [CONFIGURATION].[DataMapping] (DataSource, SourceColumn, SourceColumnType, TargetTable, TargetColumn, TargetColumnType, ValidationRules, StandardizationRules, IsPK)\n--VALUES ('YahooFinace.GBP_EURO', 'High', 'float', 'GBP_EURO_Curated', 'GBP_EURO', 'float', 'isComplete', '', 0) \n\n--INSERT INTO [CONFIGURATION].[DataMapping] (DataSource, SourceColumn, SourceColumnType, TargetTable, TargetColumn, TargetColumnType, ValidationRules, StandardizationRules, IsPK)\n--VALUES ('YahooFinace.GBP_EURO', 'Low', 'float', 'GBP_EURO_Curated', 'GBP_EURO', 'float', 'isComplete', '', 0) \n\n--INSERT INTO [CONFIGURATION].[DataMapping] (DataSource, SourceColumn, SourceColumnType, TargetTable, TargetColumn, TargetColumnType, ValidationRules, StandardizationRules, IsPK)\n--VALUES ('YahooFinace.GBP_EURO', 'Close', 'float', 'GBP_EURO_Curated', 'GBP_EURO', 'float', 'isComplete', '', 0) \n\n--INSERT INTO [CONFIGURATION].[DataMapping] (DataSource, SourceColumn, SourceColumnType, TargetTable, TargetColumn, TargetColumnType, ValidationRules, StandardizationRules, IsPK)\n--VALUES ('YahooFinace.GBP_EURO', 'AdjClose', 'float', 'GBP_EURO_Curated', 'GBP_EURO', 'float', 'isComplete', '', 0) \n\n--INSERT INTO [CONFIGURATION].[DataMapping] (DataSource, SourceColumn, SourceColumnType, TargetTable, TargetColumn, TargetColumnType, ValidationRules, StandardizationRules, IsPK)\n--VALUES ('YahooFinace.GBP_EURO', 'Volume', 'str', 'GBP_EURO_Curated', 'GBP_EURO', 'str', 'isComplete', '', 0) \n\n--1. GBP/EURO -- GBP to EURO RATE\nhttps://query1.finance.yahoo.com/v7/finance/download/GBPEUR=X?period1=1640995200&period2=1670371200&interval=1d&events=history&includeAdjustedClose=true\n2. GBP/USD -- GBP to USD RATE\nhttps://query1.finance.yahoo.com/v7/finance/download/GBPUSD=X?period1=1640995200&period2=1670371200&interval=1d&events=history&includeAdjustedClose=true\n3. WTI -- W&T Offshore, Inc. (WTI)\nhttps://query1.finance.yahoo.com/v7/finance/download/CRUD.L?period1=1640995200&period2=1670371200&interval=1d&events=history&includeAdjustedClose=true\n4. BRENT -- Brent Crude Oil Last Day Finance (BZ=F)\nhttps://query1.finance.yahoo.com/v7/finance/download/BZ=F?period1=1640995200&period2=1670371200&interval=1d&events=history&includeAdjustedClose=true\n5. COAL -- Coal Trading Price\nhttps://query1.finance.yahoo.com/v7/finance/download/MTF=F?period1=1640995200&period2=1670371200&interval=1d&events=history&includeAdjustedClose=true\n\nMETADATA OR COLUMNS IN THESES APIS (CSV FORMAT)\n\nDate,Open,High,Low,Close,Adj Close,Volume.\n\n\n\n\n\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "ddsqlpool_synapse",
				"poolName": "ddsqlpool_synapse"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}